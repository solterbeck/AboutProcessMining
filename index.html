<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Mining Bibliography</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 15px 20px;
        }
        header h1 {
            margin: 0;
            font-size: 1.5rem;
        }
        header nav {
            margin-top: 10px;
        }
        header nav a {
            color: white;
            margin-right: 15px;
            text-decoration: none;
            font-weight: bold;
        }
        header nav a:hover {
            text-decoration: underline;
        }
        .search-container {
            margin: 20px 0;
        }
        .filter-buttons {
            margin-bottom: 20px;
        }
        .filter-buttons button {
            margin-right: 10px;
        }
        .bibliography-entry {
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 15px;
            padding: 15px;
            cursor: pointer;
        }
        .bibliography-entry:hover {
            background-color: #f8f9fa;
        }
        .details-section {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin-top: 20px;
        }
        .details-section label {
            font-weight: bold;
        }
        .details-section a {
            color: #007bff;
            text-decoration: none;
        }
        .details-section a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <h1>All About Process Mining</h1>
        <nav>
            <a href="#bibliography">Bibliography</a>
            <a href="#imprint">Imprint</a>
        </nav>
    </header>

    <div class="container">
        <!-- Search and Filter Bar -->
        <div class="search-container">
            <input type="text" id="searchInput" class="form-control" placeholder="Search in Title, Author, Editor, Tags, and Abstract">
        </div>
        <div class="filter-buttons">
            <button class="btn btn-primary" id="filterAll">All</button>
            <button class="btn btn-outline-primary" id="filter2016">from 2016</button>
            <button class="btn btn-outline-primary" id="filter2000">from 2000</button>
            <button class="btn btn-outline-primary" id="filterBefore2000">before 2000</button>
            <button class="btn btn-outline-primary" id="filterNew">New Entries</button>
        </div>

        <!-- Bibliography List -->
        <div id="bibliographyList">
            <!-- Dynamic content will be rendered here -->
        </div>

        <!-- Details Section -->
        <div class="details-section" id="detailsSection" style="display: none;">
            <h2 id="detailTitle">Select an entry to view details</h2>
            <div id="detailContent">
                <!-- Details will be displayed dynamically here -->
            </div>
        </div>
    </div>

    <script>
        let data = null;       // Original data
        let filteredData = []; // Filtered data

        // Load the data dynamically
        $.getJSON('library_full_data.json', function(response) {
            data = response;
            filteredData = [...data]; // Initially, filteredData is the same as data
            renderBibliographyList(filteredData);
        });

        function renderBibliographyList(data) {
            const listContainer = $("#bibliographyList");
            listContainer.empty();

            data.forEach((item, index) => {
                const entry = $(`
                    <div class="bibliography-entry" data-index="${index}">
                        <h5>${item.Title || 'N/A'}</h5>
                        <p><strong>Author(s):</strong> ${item.Author || 'N/A'}</p>
                    </div>
                `);
                listContainer.append(entry);
            });

            // Add click event to display details
            $(".bibliography-entry").on("click", function () {
                const index = $(this).data("index");
                const item = filteredData[index];
                renderDetails(item);
            });
        }

        function renderDetails(item) {
            const detailsSection = $("#detailsSection");
            const detailContent = $("#detailContent");
            detailsSection.show();

            const formattedDetails = `
                <div><label>Title:</label> ${item.Title || 'N/A'}</div>
                <div><label>Author(s):</label> ${item.Author || 'N/A'}</div>
                <div><label>Editor(s):</label> ${item.Editor || 'N/A'}</div>
                <div><label>Item Type:</label> ${item.ItemType || 'N/A'}</div>
                <div><label>Publication Title:</label> ${item.PublicationTitle || 'N/A'}</div>
                <div><label>Publisher:</label> ${item.Publisher || 'N/A'}</div>
                <div><label>Year:</label> ${item.PublicationYear || 'N/A'}</div>
                <div><label>Pages:</label> ${item.Pages || 'N/A'}</div>
                <div><label>Tags:</label> ${item.ManualTags || 'N/A'}</div>
                <div><label>Abstract:</label> ${item.AbstractNote || 'N/A'}</div>
                <div><label>Source:</label> 
                    <a href="${item.Url || '#'}" target="_blank">Download or link to the source</a>
                </div>
            `;

            detailContent.html(formattedDetails);
        }

        // Filter Buttons Functionality
        $("#filterAll").on("click", function () {
            filteredData = [...data];
            renderBibliographyList(filteredData);
        });

        $("#filter2016").on("click", function () {
            filteredData = data.filter(item => parseInt(item.PublicationYear) >= 2016);
            renderBibliographyList(filteredData);
        });

        $("#filter2000").on("click", function () {
            filteredData = data.filter(item => parseInt(item.PublicationYear) >= 2000);
            renderBibliographyList(filteredData);
        });

        $("#filterBefore2000").on("click", function () {
            filteredData = data.filter(item => parseInt(item.PublicationYear) < 2000);
            renderBibliographyList(filteredData);
        });

        $("#filterNew").on("click", function () {
            // Logic for new entries (if defined) goes here
        });
    </script>
</body>
</html>
