<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Process Mining Bibliography</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding-bottom: 70px; /* Ensure space for fixed pagination */
        }
        header {
            background-color: #007bff;
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
        }
        header img {
            height: 40px;
            margin-right: 15px;
        }
        header h1 {
            margin: 0;
            font-size: 1.5rem;
            flex-grow: 1;
        }
        header nav a {
            color: white;
            margin-right: 15px;
            text-decoration: none;
            font-weight: bold;
        }
        header nav a:hover {
            text-decoration: underline;
        }
        .search-container {
            margin: 20px 0;
            position: relative;
        }
        #searchInput {
            padding-right: 30px;
        }
        .clear-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            font-size: 1.2rem;
            color: #aaa;
        }
        .clear-btn:hover {
            color: #000;
        }
        .filter-buttons {
            margin-bottom: 20px;
        }
        .filter-buttons button {
            margin-right: 10px;
        }
        .accordion-button:not(.collapsed) {
            color: #007bff;
            background-color: #e9ecef;
        }
        .fixed-pagination {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #f8f9fa;
            padding: 10px 0;
            text-align: center;
            border-top: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <img src="logo-placeholder.png" alt="Logo">
        <h1>All About Process Mining</h1>
        <nav>
            <a href="#bibliography">Bibliography</a>
            <a href="imprint.html">Imprint</a>
        </nav>
    </header>

    <div class="container">
        <!-- Search and Filter Bar -->
        <div class="search-container">
            <input type="text" id="searchInput" class="form-control" placeholder="Search in Title, Author, Editor, Tags, and Abstract">
            <span class="clear-btn" id="clearSearch">&times;</span>
        </div>
        <div class="filter-buttons">
            <button class="btn btn-primary" id="filterAll">All</button>
            <button class="btn btn-outline-primary" id="filter2016">from 2016</button>
            <button class="btn btn-outline-primary" id="filter2000">from 2000</button>
            <button class="btn btn-outline-primary" id="filterBefore2000">before 2000</button>
            <button class="btn btn-outline-primary" id="filter2024">from 2024</button>
        </div>

        <!-- Bibliography List with Accordion -->
        <div class="accordion" id="bibliographyAccordion">
            <!-- Dynamic content will be rendered here -->
        </div>
    </div>

    <!-- Fixed Pagination -->
    <div class="fixed-pagination" id="pagination">
        <!-- Pagination buttons will be dynamically rendered here -->
    </div>

    <script>
        let data = null;
        let filteredData = [];
        const rowsPerPage = 5;
        let currentPage = 1;

        function sortDataByTitle(data) {
            return data.sort((a, b) => {
                const titleA = (a.Title || '').toLowerCase();
                const titleB = (b.Title || '').toLowerCase();
                return titleA.localeCompare(titleB);
            });
        }

        function renderPagination(data) {
            const totalPages = Math.ceil(data.length / rowsPerPage);
            const paginationContainer = $("#pagination");
            paginationContainer.empty();

            const visiblePages = 5;
            const startPage = Math.max(1, currentPage - Math.floor(visiblePages / 2));
            const endPage = Math.min(totalPages, startPage + visiblePages - 1);

            if (currentPage > 1) {
                paginationContainer.append('<button class="btn btn-outline-primary" id="prevPage">Previous</button>');
            }

            for (let i = startPage; i <= endPage; i++) {
                const activeClass = i === currentPage ? 'btn-primary' : 'btn-outline-primary';
                paginationContainer.append(`<button class="btn ${activeClass} page-button">${i}</button>`);
            }

            if (currentPage < totalPages) {
                paginationContainer.append('<button class="btn btn-outline-primary" id="nextPage">Next</button>');
            }

            $("#prevPage").on("click", function () {
                if (currentPage > 1) currentPage--;
                updateBibliographyAndPagination();
            });

            $("#nextPage").on("click", function () {
                if (currentPage < totalPages) currentPage++;
                updateBibliographyAndPagination();
            });

            $(".page-button").on("click", function () {
                currentPage = parseInt($(this).text());
                updateBibliographyAndPagination();
            });
        }

        function updateBibliographyAndPagination() {
            const start = (currentPage - 1) * rowsPerPage;
            const paginatedData = filteredData.slice(start, start + rowsPerPage);
            renderBibliographyList(paginatedData);
            renderPagination(filteredData);
        }

        $.getJSON('library_full_data.json', function (response) {
            data = sortDataByTitle(response);
            filteredData = [...data];
            currentPage = 1;
            updateBibliographyAndPagination();
        });

        $("#filter2024").on("click", function () {
            filteredData = data.filter(item => parseInt(item.PublicationYear) >= 2024);
            currentPage = 1;
            updateBibliographyAndPagination();
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>
